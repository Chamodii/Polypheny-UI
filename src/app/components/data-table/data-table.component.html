<div class="row" *ngIf="resultSet.data">
  <div class="col-lg-12" id="data-table-wrapper">

    <table class="table table-hover table-sm table-bordered table-striped" id="data-table" [attr.data-table]="resultSet.table">
      <thead>
      <tr>
        <th class="selector" *ngIf="config.update || config.delete">
          <input type="checkbox">
        </th>
        <ng-container *ngFor="let h of resultSet.header">
          <th >{{h.name}}
            <a *ngIf="config.sort" [routerLink]="" [ngClass]="{'btn-primary' : h.sort.sorting, 'btn-light': !h.sort.sorting, 'btn btn-sm float-right': true}" (click)="sortTable(h.sort)">
              <i [ngClass]="h.sort.direction === 'ASC' ? 'icon-arrow-up' : 'icon-arrow-down'"></i>
            </a>
          </th>
        </ng-container>
        <th class="delete" *ngIf="config.delete">
          <!--<i class="cui-trash"></i>-->
      </th>
      </tr>
      </thead>
      <tbody>
      <tr *ngIf="config.search">
        <td *ngIf="config.update || config.delete"></td>
        <td *ngFor="let h of resultSet.header"><input type="text" class="form-control form-control-sm table-filter" placeholder="search" [attr.data-col]="h.name" [value]="h.filter" (keyup)="filterTable($event)"></td>
        <td *ngIf="config.update || config.delete"></td>
      </tr>
      <tr *ngFor="let d1 of resultSet.data; let i = index">
        <ng-container *ngIf="editing === i">
          <td class="selector" *ngIf="config.update || config.delete"><input type="checkbox" checked="true"></td>
          <td *ngFor="let d2 of d1; let i = index"><input type="text" class="form-control form-control-sm editing" [value]="d2" [attr.data-before]="d2" [attr.data-col]="resultSet.header[i].name"></td>
          <td *ngIf="config.update || config.delete">
            <button class="btn btn-primary editing" id="editColSave" (click)="updateRow()"><i class="fa fa-save editing"></i></button>
          </td>
        </ng-container>
        <ng-container *ngIf="editing !== i">
          <td class="selector" *ngIf="config.update || config.delete"><input type="checkbox"></td>
          <td *ngFor="let d2 of d1" (dblclick)="triggerEditing(i)">{{d2}}</td>
          <td class="delete" *ngIf="config.update || config.delete">
            <i class="cui-trash" *ngIf="config.delete" (click)="deleteRow(d1)"></i>
          </td>
        </ng-container>
      </tr>
      <tr *ngIf="resultSet.data.length === 0">
        <td [attr.colspan]="resultSet.header.length+2" style="text-align: center" class="text-danger">(no data to show)</td>
      </tr>
      <tr *ngIf="config.create">
        <td></td>
        <td *ngFor="let h of resultSet.header">
          <input type="text" class="form-control form-control-sm insert-input" placeholder="insert (todo:type)" [name]="h.name" [ngModel]="insertValues.get(h.name)" (ngModelChange)="insertValues.set(h.name, $event)">
        </td>
        <td *ngIf="config.update || config.delete"><button id="addColumnBtn" class="btn btn-primary" (click)="insertRow()">+</button></td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
<div class="row">
  <div class="col-lg-12">
    <nav aria-label="Page navigation example" class="float-right" *ngIf="resultSet.highestPage > 1">
      <ul class="pagination">
        <li *ngFor="let p of pagination" class="page-item" [ngClass]="{ 'disabled': p.disabled, 'active': p.active }">
          <a href="#" class="page-link" [routerLink]="p.routerLink">{{p.label}}</a>
        </li>
      </ul>
    </nav>
  </div>
</div>
<div *ngIf="!resultSet.data">data-table: nothing to show.</div>
<div class="text-danger" *ngIf="resultSet.error">{{resultSet.error}}</div>
