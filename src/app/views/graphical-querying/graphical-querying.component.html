<div class="row">
  <h5>Graphical Querying</h5>
</div>
<div class="row" style="position: relative;">
  <div class="col-lg-12 col-sm-12">

    <div class="input-group mb-3">
      <div class="input-group-prepend">
        <span class="input-group-text">select</span>
      </div>
      <!-- <input type="text" class="form-control" placeholder="Username" aria-label="Username" aria-describedby="basic-addon1"> -->
      <div class="form-control fit" id="selectBox" (treeDrop)="onTreeDrop($event)" [treeAllowDrop]="true"></div>
    </div>

    <div class="input-group mb-3">
      <div class="input-group-prepend">
        <span class="input-group-text">from</span>
      </div>
      <!-- <input type="text" class="form-control" placeholder="Username" aria-label="Username" aria-describedby="basic-addon1"> -->
      <div class="form-control fit" id="fromBox">
        <span *ngFor="let t of tables | keyvalue" class="badge badge-secondary dbTable">{{t.key}}</span>
      </div>
    </div>

    <div class="input-group mb-3">
      <div class="input-group-prepend">
        <span class="input-group-text">join<br>conditions</span>
      </div>
      <div class="form-control fit" id="joinConditionBox">
        <ng-container *ngFor="let con of joinConditions | keyvalue">
          <input type="checkbox" [(ngModel)]="con.value.active" [id]="con.key" (click)="toggleCondition(con.value)"><label [for]="con.key">&nbsp;{{con.value.condition}}</label><br>
        </ng-container>
      </div>
    </div>

    <div class="input-group mb-3">
      <div class="input-group-prepend">
        <span class="input-group-text" id="basic-addon1">SQL</span>
      </div>
      <textarea class="form-control" rows="4" id="sqlInput"></textarea>
      <!--<input type="text" id="additionalSQL" class="form-control" placeholder="additional SQL" aria-label="SQL" aria-describedby="basic-addon1">-->
    </div>

    <pre id="generatedSQL" class="mb-3">{{generatedSQL}}</pre>

    <button class="btn btn-primary" (click)="executeQuery()">execute query</button>
  </div>

</div>

<hr>

<div class="row">
  <div class="col-lg-12" style="overflow: scroll;padding-bottom: 50px;">
    <h5>RelAlg Builder</h5>
    <button class="btn btn-primary" (click)="executeRelAlg()">execute plan</button>
    <app-relational-algebra [relationalAlgebra]="relAlg"></app-relational-algebra>
  </div>
</div>

<div class="row" *ngIf="resultSet">
  <div class="col-lg-12">
    <h5>Query Result</h5>
    <app-data-table [resultSet]="resultSet" [config]="{create:false, update:false, delete:false, sort:false, search: false}"></app-data-table>
  </div>
</div>
